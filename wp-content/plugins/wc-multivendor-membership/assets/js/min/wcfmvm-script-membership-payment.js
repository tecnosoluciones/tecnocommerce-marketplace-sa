jQuery(document).ready(function(e){e("input[name=wcfm_subscription_paymode]").click(function(){var m=e("input[name=wcfm_subscription_paymode]:checked").val();e(".wcfm_payment_option_details").slideUp(),e(".wcfm_membership_payment_form_non_free").slideUp(),e(".wcfm_payment_option_"+m+"_deails").slideDown(),e("#wcfm_membership_payment_form_"+m).slideDown()}),e(".wcfm_membership_payment_button").click(function(m){e(".wcfm-message").html("").removeClass("wcfm-error").removeClass("wcfm-success").slideUp(),$wcfm_is_valid_form=!0,e(document.body).trigger("wcfm_form_validate",e(".wcfm_membership_payment_form")),$is_valid=$wcfm_is_valid_form,e("#wcfm_membership_container").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),$form_ajax_submit=!1;var s="free";if(e(".wcfm_subscription_paymode").length>0?e("input[name=wcfm_subscription_paymode]").is(":checked")?"paypal"==(s=e("input[name=wcfm_subscription_paymode]:checked").val())?e("#wcfm_membership_payment_form_paypal").submit():(m.preventDefault(),$form_ajax_submit=!0):(m.preventDefault(),alert("Please select a payment option first.")):(m.preventDefault(),$form_ajax_submit=!0),$is_valid&&$form_ajax_submit){var a={action:"wcfm_ajax_controller",controller:"wcfm-memberships-payment",wcfm_membership_payment_form:e(".wcfm_membership_payment_form").serialize(),wcfm_ajax_nonce:wcfm_params.wcfm_ajax_nonce,status:"submit",paymode:s};e.post(wcfm_params.ajax_url,a,function(m){m&&($response_json=e.parseJSON(m),$response_json.status?e(".wcfm_membership_payment_form .wcfm-message").html('<span class="wcicon-status-completed"></span>'+$response_json.message).addClass("wcfm-success").slideDown("slow",function(){$response_json.redirect&&(window.location=$response_json.redirect)}):(e(".wcfm-message").html("").removeClass("wcfm-success").slideUp(),e(".wcfm_membership_payment_form .wcfm-message").html('<span class="wcicon-status-cancelled"></span>'+$response_json.message).addClass("wcfm-error").slideDown()),e("#wcfm_membership_container").unblock())})}else e("#wcfm_membership_container").unblock()})});